==================================================
FILE PATH: index.html
==================================================
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sunrise Detox Presents, Detox Jeapardy</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Set Inter font family -->
    <style>
        html, body {
            font-family: 'Inter', sans-serif;
            background-color: #060a2b; /* Dark blue background */
            height: 100vh;
            width: 100vw;
            overflow: hidden; /* No scrolling */
        }
        
        #game-container {
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        /* Custom styles for the Jeopardy board */
        .jeopardy-board {
            display: grid;
            grid-template-columns: repeat(5, minmax(0, 1fr));
            gap: 4px; /* Reduced gap */
            flex-grow: 1; /* Board fills remaining space */
            min-height: 0; /* Allows board to shrink */
        }
        .category-cell {
            background-color: #06226e; /* Jeopardy blue */
            color: white;
            font-weight: bold;
            text-align: center;
            /* RESPONSIVE: Scalable vertical padding and font size */
            padding: clamp(4px, 1.2vh, 8px) 4px;
            font-size: clamp(0.65rem, 2.4vw, 0.875rem);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.2;
            min-height: 0;
        }
        .question-cell {
            background-color: #06226e; /* Jeopardy blue */
            color: #ffcc00; /* Jeopardy yellow */
            /* RESPONSIVE: Scalable font size and padding */
            font-size: clamp(0.9rem, 4vw, 1.3rem);
            padding: clamp(4px, 2vh, 8px);
            font-weight: bold;
            text-align: center;
            border-radius: 6px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease-in-out;
            min-height: 0;
        }
        .question-cell:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.5);
        }
        .question-cell.answered {
            background-color: #373b5a;
            color: #6b7280;
            cursor: not-allowed;
            pointer-events: none;
        }
        .question-cell.answered::after {
            content: 'ANSWERED';
            /* RESPONSIVE: Scaled font size */
            font-size: clamp(0.6rem, 2vw, 0.875rem);
            font-weight: normal;
        }
        /* Modal styles */
        .modal {
            display: none; /* Hidden by default */
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.6);
            align-items: center;
            justify-content: center;
        }
        .modal-content {
            background-color: #fefefe;
            margin: auto;
            /* RESPONSIVE: Scalable padding and reduced min-height */
            padding: clamp(12px, 3vw, 20px);
            border-radius: 12px;
            width: 90%;
            max-width: 600px;
            min-height: 300px; /* Reduced min-height */
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
        }
        .modal-question {
            /* RESPONSIVE: Scalable font size */
            font-size: clamp(1rem, 4vw, 1.25rem);
            font-weight: 500;
            color: #1f2937;
            text-align: center;
            margin: auto;
            padding: 16px;
        }
        .modal-answer {
            display: none; /* Hidden until revealed */
            /* RESPONSIVE: Scalable font size */
            font-size: clamp(0.9rem, 3.5vw, 1.1rem);
            font-weight: 600;
            color: #10b981; /* Green for answer */
            text-align: center;
            margin: 16px 0;
        }
        
        /* SMALLER SCOREBOARD STYLES */
        .team-scoreboard {
            background-color: #ffffff;
            /* RESPONSIVE: Scalable padding */
            padding: clamp(6px, 2vw, 8px);
            border-radius: 8px;
            border: 3px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .team-scoreboard.active {
            /* 'var(--team-color)' will be set by JS */
            border-color: var(--team-color, #3b82f6); 
            box-shadow: 0 0 15px var(--team-color, #3b82f6);
        }
        .team-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 4px;
        }
        .team-name-input {
            /* RESPONSIVE: Scalable font size */
            font-size: clamp(0.9rem, 3vw, 1.1rem);
            font-weight: 700;
            color: #1f2937;
            border: none;
            outline: none;
            width: 100%;
            padding: 2px 0;
        }
        .team-name-input:focus {
            border-bottom: 2px solid #3b82f6;
        }
        .team-color-picker {
            /* RESPONSIVE: Scalable width and height */
            width: clamp(20px, 5vw, 24px);
            height: clamp(20px, 5vw, 24px);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            padding: 0;
        }
        .team-score {
            /* RESPONSIVE: Scalable font size */
            font-size: clamp(1.4rem, 5vw, 1.75rem);
            font-weight: 800;
            color: #06226e;
        }
        .team-score-label {
            font-size: 0.875rem; /* 14px */
            font-weight: 700;
            color: #4b5563;
        }

        /* Daily Double Modal Styles */
        #daily-double-modal .modal-content {
            min-height: 250px;
            justify-content: center;
            background-color: #060a2b;
            border: 4px solid #ffcc00;
        }
        #dd-wager-input {
            /* RESPONSIVE: Scalable font size */
            font-size: clamp(1rem, 4vw, 1.25rem);
            font-weight: bold;
            text-align: center;
            width: 100%;
            padding: 8px;
            border-radius: 8px;
            border: 2px solid #ccc;
        }

        /* Timer Styles */
        #timer-container {
            display: none; /* Hidden by default */
            align-items: center;
            justify-content: center;
            gap: 16px;
            margin-top: 16px;
        }
        #timer-display {
            /* RESPONSIVE: Scalable font size */
            font-size: clamp(1.75rem, 7vw, 2.25rem);
            font-weight: 800;
            color: #06226e;
            width: 50px;
            text-align: center;
        }
        #timer-toggle-btn {
            background-color: #06226e;
            color: white;
            border: none;
            border-radius: 50%;
            width: 44px;
            height: 44px;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        #timer-toggle-btn:hover {
            background-color: #0e3aa6;
        }
        #timer-toggle-btn svg {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }
    </style>
</head>
<body class="p-2 md:p-4">

    <div id="game-container" class="container mx-auto max-w-6xl">
        <!-- Header -->
        <div class="relative flex justify-center items-center mb-3">
             <h1 class="text-2xl md:text-3xl font-extrabold text-center text-white">Sunrise Detox Presents, Detox Jeapardy</h1>
             <button id="reset-game" class="absolute right-0 bg-red-500 hover:bg-red-600 text-white font-bold py-2 px-3 rounded-lg transition-colors text-sm">
                Reset
            </button>
        </div>
       
        <!-- Scoreboard -->
        <div class="grid grid-cols-2 gap-2 mb-3">
            <!-- Team 1 Scoreboard -->
            <div id="team-1-board" class="team-scoreboard active" style="--team-color: #3b82f6;">
                <div class="team-header">
                    <input type="color" id="team-1-color" class="team-color-picker" value="#3b82f6">
                    <input type="text" id="team-1-name" class="team-name-input" value="Team 1">
                </div>
                <h2 class="team-score-label">Score:</h2>
                <span id="team-1-score" class="team-score">0</span>
            </div>

            <!-- Team 2 Scoreboard -->
            <div id="team-2-board" class="team-scoreboard" style="--team-color: #ef4444;">
                <div class="team-header">
                    <input type="color" id="team-2-color" class="team-color-picker" value="#ef4444">
                    <input type="text" id="team-2-name" class="team-name-input" value="Team 2">
                </div>
                <h2 class="team-score-label">Score:</h2>
                <span id="team-2-score" class="team-score">0</span>
            </div>
        </div>

        <!-- Jeopardy Board -->
        <div id="jeopardy-board" class="jeopardy-board">
            <!-- Categories and questions will be injected by JavaScript -->
        </div>
    </div>

    <!-- Question Modal -->
    <div id="question-modal" class="modal">
        <div class="modal-content">
            <div>
                <div class="flex justify-between items-center mb-2">
                    <span id="modal-category" class="text-lg font-semibold text-blue-700">Category</span>
                    <span id="modal-points" class="text-xl font-bold text-yellow-600">$000</span>
                </div>
                
                <div id="modal-notification" class="hidden text-center text-lg font-bold text-red-600 my-2"></div>

                <div id="modal-question-text" class="modal-question">
                    Question text will appear here...
                </div>
                <div id="modal-answer-text" class="modal-answer">
                    Answer text will appear here...
                </div>
            </div>

            <!-- Button & Timer Container -->
            <div>
                <div id="timer-container">
                    <div id="timer-display">37</div> <!-- NEW: Timer starts at 37 -->
                    <button id="timer-toggle-btn" title="Play/Pause Timer">
                        <!-- Icon will be set by JS -->
                    </button>
                </div>

                <div id="button-container" class="mt-4 flex flex-col gap-3">
                    <!-- RESPONSIVE: Stacks buttons on small screens (sm:grid-cols-2) -->
                    <div id="scoring-buttons" class="grid grid-cols-1 sm:grid-cols-2 gap-3">
                        <!-- RESPONSIVE: Smaller text on mobile (text-base) -->
                        <button id="correct-btn" class="w-full bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg transition-colors text-base md:text-lg">
                            I Got It Right!
                        </button>
                        <button id="incorrect-btn" class="w-full bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg transition-colors text-base md:text-lg">
                            I Got It Wrong
                        </button>
                    </div>
                    <!-- NEW: Next button, hidden by default -->
                    <!-- RESPONSIVE: Smaller text on mobile (text-base) -->
                    <button id="next-btn" class="hidden w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg transition-colors text-base md:text-lg">
                        Next
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Daily Double Modal -->
    <div id="daily-double-modal" class="modal">
        <div class="modal-content">
            <h2 class="text-4xl md:text-5xl font-extrabold text-center text-yellow-400 mb-6" style="text-shadow: 2px 2px #000;">DAILY DOUBLE</h2>
            <div class="text-center mb-4">
                <label for="dd-wager-input" class="text-white text-xl md:text-2xl font-medium" id="dd-wager-label">Enter Wager:</label>
                <input type="number" id="dd-wager-input" class="mt-2" min="5">
            </div>
            <!-- RESPONSIVE: Smaller text on mobile (text-base) -->
            <button id="submit-wager-btn" class="w-full bg-yellow-500 hover:bg-yellow-600 text-black font-bold py-3 px-4 rounded-lg transition-colors text-base md:text-lg">
                Submit Wager
            </button>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            
            // ---------------------------------
            // --- 1. GAME DATA ---
            // ---------------------------------
            const gameData = {
                "Mental Health Basics": {
                    100: { q: "This is a common mood disorder characterized by persistent sadness, loss of interest, and feelings of worthlessness.", a: "What is depression?" },
                    200: { q: "This condition involves excessive, persistent worry and fear about everyday situations.", a: "What is an anxiety disorder?" },
                    300: { q: "A disorder associated with episodes of mood swings ranging from depressive lows to manic highs.", a: "What is bipolar disorder?" },
                    400: { q: "The practice of being fully present and engaged in the current moment without judgment.", a: "What is mindfulness?" },
                    500: { q: "A negative and unfair belief associated with a particular circumstance, quality, or person, often preventing people from seeking help.", a: "What is stigma?" }
                },
                "Detox & Withdrawal": {
                    100: { q: "The medical process of safely helping the body rid itself of a substance.", a: "What is detoxification (or detox)?" },
                    200: { q: "The physical and mental symptoms that occur after stopping or reducing intake of a substance.", a: "What is withdrawal?" },
                    300: { q: "A state in which the body adapts to a substance, requiring more of it to achieve the same effect.", a: "What is tolerance?" },
                    400: { q: "A set of symptoms that can continue for weeks, months, or even years after stopping substance use.", a: "What is Post-Acute Withdrawal Syndrome (PAWS)?" },
                    500: { q: "The term for when a person needs a substance to function 'normally' and experiences withdrawal without it.", a: "What is physical dependence?" }
                },
                "Recovery Principles": {
                    100: { q: "This phrase encourages focusing on the present 24 hours rather than worrying about the distant future.", a: "What is 'One Day at aTime'?" },
                    200: { q: "A person in recovery who guides a newer member through the program.", a: "What is a sponsor?" },
                    300: { q: "This acronym is a reminder to check if you are feeling 'Hungry, Angry, Lonely, or Tired'â€”common relapse triggers.", a: "What is H.A.L.T.?" },
                    400: { q: "A return to substance use after a period of abstinence.", a: "What is a relapse?" },
                    500: { q: "This concept, often from the Serenity Prayer, involves accepting what you cannot change and changing what you can.", a: "What is acceptance?" }
                },
                "The 12 Steps": {
                    100: { q: "Step 1 involves admitting this over alcohol or another substance.", a: "What is powerlessness?" },
                    200: { q: "Step 2 involves coming to believe in this, 'as we understood Him.'", a: "What is a Power greater than ourselves?" },
                    300: { q: "Step 3 is about making a decision to turn our will and lives over to this.", a: "What is the care of God (or a Higher Power)?" },
                    400: { q: "Step 4 involves making a 'searching and fearless' one of these.", a: "What is a moral inventory?" },
                    500: { q: "In Step 5, members admit to their Higher Power, themselves, and ______ 'the exact nature of our wrongs.'", a: "What is another human being?" }
                },
                "Coping Skills": {
                    100: { q: "This involves writing down thoughts and feelings to understand them more clearly.", a: "What is journaling?" },
                    200: { q: "These are limits and rules we set for ourselves within relationships.", a: "What are healthy boundaries?" },
                    300: { q: "Talking with a trusted friend, family member, or support group is this type of coping skill.", a: "What is social support (or 'reaching out')?" },
                    400: { q: "Physical activity is a well-known coping skill for managing this common feeling.", a: "What is stress (or anxiety/depression)?" },
                    500: { q: "This skill involves focusing on your five senses to help ground you in the present moment during high stress or a craving.", a: "What is grounding?" }
                }
            };

            // ---------------------------------
            // --- 2. GLOBAL ELEMENTS ---
            // ---------------------------------
            const board = document.getElementById('jeopardy-board');
            const modal = document.getElementById('question-modal');
            const modalCategory = document.getElementById('modal-category');
            const modalPoints = document.getElementById('modal-points');
            const modalQuestion = document.getElementById('modal-question-text');
            const modalAnswer = document.getElementById('modal-answer-text');
            const modalNotification = document.getElementById('modal-notification'); 
            const scoringButtons = document.getElementById('scoring-buttons');
            const correctBtn = document.getElementById('correct-btn');
            const incorrectBtn = document.getElementById('incorrect-btn');
            const resetBtn = document.getElementById('reset-game');
            const nextBtn = document.getElementById('next-btn'); // NEW: Next button

            // ---------------------------------
            // --- 3. TEAM ELEMENTS ---
            // ---------------------------------
            const team1Board = document.getElementById('team-1-board');
            const team2Board = document.getElementById('team-2-board');
            const team1ScoreDisplay = document.getElementById('team-1-score');
            const team2ScoreDisplay = document.getElementById('team-2-score');
            const team1ColorPicker = document.getElementById('team-1-color');
            const team2ColorPicker = document.getElementById('team-2-color');
            const team1NameInput = document.getElementById('team-1-name');
            const team2NameInput = document.getElementById('team-2-name');

            // ---------------------------------
            // --- 4. DAILY DOUBLE ELEMENTS ---
            // ---------------------------------
            const ddModal = document.getElementById('daily-double-modal');
            const ddWagerInput = document.getElementById('dd-wager-input');
            const ddWagerLabel = document.getElementById('dd-wager-label');
            const submitWagerBtn = document.getElementById('submit-wager-btn');

            // ---------------------------------
            // --- 5. TIMER ELEMENTS ---
            // ---------------------------------
            const timerContainer = document.getElementById('timer-container');
            const timerDisplay = document.getElementById('timer-display');
            const timerToggleBtn = document.getElementById('timer-toggle-btn');
            const playIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512"><path d="M73 39c-14.8-9.1-33.4-9.4-48.5-.9S0 62.6 0 80V432c0 17.4 9.4 33.4 24.5 41.9s33.7 8.1 48.5-.9L361 297c14.3-8.7 23-24.2 23-41s-8.7-32.2-23-41L73 39z"/></svg>`;
            const pauseIcon = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path d="M48 64C21.5 64 0 85.5 0 112V400c0 26.5 21.5 48 48 48H80c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H48zm192 0c-26.5 0-48 21.5-48 48V400c0 26.5 21.5 48 48 48h32c26.5 0 48-21.5 48-48V112c0-26.5-21.5-48-48-48H240z"/></svg>`;

            // ---------------------------------
            // --- 6. GAME STATE VARIABLES ---
            // ---------------------------------
            let team1Score = 0;
            let team2Score = 0;
            let activeTeam = 1; // 1 or 2
            let currentPoints = 0;
            let currentWager = 0;
            let currentDailyDouble = null;
            let timerInterval = null;
            let timerSeconds = 37; // NEW: Timer set to 37
            let isTimerRunning = false;
            let attemptState = 'initial'; // 'initial' or 'steal' or 'dailyDouble'
            
            // ---------------------------------------------------
            // --- 7. WEB AUDIO API (SOUNDS) ---
            // ---------------------------------------------------
            let audioContext;
            let timerOscillator; 
            let tickTock = 0; 

            // 7a. Initialize Audio
            function initializeAudio() {
                if (!audioContext) {
                    try {
                        audioContext = new (window.AudioContext || window.webkitAudioContext)();
                        console.log("AudioContext initialized.");
                    } catch (e) {
                        console.error("Web Audio API is not supported in this browser.", e);
                    }
                }
            }

            // 7b. Play Timer Sound ("tick-tock")
            function playTimerSound() {
                if (!audioContext) return;
                if (timerOscillator) {
                    timerOscillator.stop();
                }
                timerOscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                timerOscillator.type = 'sine';
                
                if (tickTock % 2 === 0) {
                    timerOscillator.frequency.setValueAtTime(1200, audioContext.currentTime); // High tick
                } else {
                    timerOscillator.frequency.setValueAtTime(800, audioContext.currentTime); // Lower tock
                }
                tickTock++;

                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.05);

                timerOscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                timerOscillator.start();
                timerOscillator.stop(audioContext.currentTime + 0.05);
            }

            // 7c. Stop Timer Sound
            function stopTimerSound() {
                if (timerOscillator) {
                    timerOscillator.stop();
                    timerOscillator = null;
                }
                tickTock = 0; 
            }

            // 7d. Play Daily Double Sound
            function playDailyDoubleSound() {
                if (!audioContext) return;
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                osc.type = 'sine';
                osc.connect(gain);
                gain.connect(audioContext.destination);

                const now = audioContext.currentTime;
                gain.gain.setValueAtTime(0.3, now); 
                
                osc.frequency.setValueAtTime(300, now);
                osc.frequency.exponentialRampToValueAtTime(600, now + 0.1);
                
                osc.frequency.setValueAtTime(450, now + 0.15);
                osc.frequency.exponentialRampToValueAtTime(900, now + 0.3);

                osc.start();
                osc.stop(now + 0.4);
            }

            // 7e. Play Times Up Sound (3-beat buzz)
            function playTimesUpSound() {
                if (!audioContext) return;
                const now = audioContext.currentTime;
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                osc.type = 'sawtooth';
                osc.connect(gain);
                gain.connect(audioContext.destination);

                // Beat 1
                osc.frequency.setValueAtTime(120, now);
                gain.gain.setValueAtTime(0.3, now);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.1);

                // Beat 2
                osc.frequency.setValueAtTime(120, now + 0.15);
                gain.gain.setValueAtTime(0.3, now + 0.15);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.25);

                // Beat 3
                osc.frequency.setValueAtTime(120, now + 0.3);
                gain.gain.setValueAtTime(0.3, now + 0.3);
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.4);

                osc.start();
                osc.stop(now + 0.4);
            }

            // 7f. Play Steal Sound (Urgent beeps)
            function playStealSound() {
                if (!audioContext) return;
                const now = audioContext.currentTime;
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                osc.type = 'triangle'; 
                osc.connect(gain);
                gain.connect(audioContext.destination);

                gain.gain.setValueAtTime(0.2, now);
                osc.frequency.setValueAtTime(900, now);
                osc.frequency.setValueAtTime(1200, now + 0.1);
                
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.2);

                osc.start();
                osc.stop(now + 0.2);
            }

            // 7g. *** UPDATED: Play Correct Sound (Tadah Fanfare) ***
            function playCorrectSound() {
                if (!audioContext) return;
                const now = audioContext.currentTime;
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                
                osc.type = 'triangle'; // 'triangle' sounds more like a classic fanfare
                osc.connect(gain);
                gain.connect(audioContext.destination);
                
                gain.gain.setValueAtTime(0.2, now); // Set volume

                // "Ta-da-da-DAHHHHH!"
                // Note 1: C5
                osc.frequency.setValueAtTime(523.25, now);
                // Note 2: E5
                osc.frequency.setValueAtTime(659.25, now + 0.1);
                // Note 3: G5
                osc.frequency.setValueAtTime(783.99, now + 0.2);
                // Note 4: C6 (hold longer)
                osc.frequency.setValueAtTime(1046.50, now + 0.3);

                // Fade out the sound
                gain.gain.exponentialRampToValueAtTime(0.001, now + 0.7);
                
                osc.start(now);
                osc.stop(now + 0.7);
            }
            // --- END OF AUDIO SECTION ---


            // ---------------------------------
            // --- 8. GAME LOGIC (BOARD) ---
            // ---------------------------------
            function createBoard() {
                board.innerHTML = '';
                team1Score = 0;
                team2Score = 0;
                updateScore(0);
                setActiveTeam(1);
                const categories = Object.keys(gameData);
                categories.forEach(category => {
                    const cell = document.createElement('div');
                    cell.classList.add('category-cell');
                    cell.textContent = category;
                    board.appendChild(cell);
                });
                const points = [100, 200, 300, 400, 500];
                let allCells = [];
                points.forEach(point => {
                    categories.forEach(category => {
                        const cell = document.createElement('div');
                        cell.classList.add('question-cell');
                        cell.textContent = `$${point}`; 
                        cell.dataset.category = category;
                        cell.dataset.pointsKey = point; 
                        cell.dataset.pointsValue = point;
                        cell.addEventListener('click', handleQuestionClick);
                        board.appendChild(cell);
                        allCells.push(cell);
                    });
                });
                allCells.forEach(cell => cell.dataset.dailyDouble = 'false');
                const ddIndex = Math.floor(Math.random() * allCells.length);
                allCells[ddIndex].dataset.dailyDouble = 'true';
            }

            // ------------------------------------------
            // --- 9. GAME LOGIC (TEAMS & SCORING) ---
            // ------------------------------------------
            function setActiveTeam(teamNum) {
                activeTeam = teamNum;
                if (teamNum === 1) {
                    team1Board.classList.add('active');
                    team2Board.classList.remove('active');
                } else {
                    team1Board.classList.remove('active');
                    team2Board.classList.add('active');
                }
            }

            // *** UPDATED: Score cannot go below 0 ***
            function updateScore(points) {
                let currentScore = (activeTeam === 1) ? team1Score : team2Score;
                let newScore = currentScore + points;

                if (newScore < 0) {
                    newScore = 0; // Don't allow score to go negative
                }

                if (activeTeam === 1) {
                    team1Score = newScore;
                    team1ScoreDisplay.textContent = team1Score;
                } else {
                    team2Score = newScore;
                    team2ScoreDisplay.textContent = team2Score;
                }
            }
            
            // ------------------------------------------
            // --- 10. GAME LOGIC (NOTIFICATIONS) ---
            // ------------------------------------------
            function showNotification(message, duration = 0) {
                modalNotification.textContent = message;
                modalNotification.classList.remove('hidden');
                if (duration > 0) {
                    setTimeout(hideNotification, duration);
                }
            }
            function hideNotification() {
                modalNotification.classList.add('hidden');
            }

            // ---------------------------------
            // --- 11. GAME LOGIC (TIMER) ---
            // ---------------------------------
            function resetTimer() {
                clearInterval(timerInterval);
                isTimerRunning = false;
                timerDisplay.textContent = 37; // NEW: Reset to 37
                timerToggleBtn.innerHTML = playIcon;
                stopTimerSound(); 
            }

            function startTimer(duration) {
                if (isTimerRunning) return; 
                
                isTimerRunning = true;
                timerSeconds = duration;
                timerDisplay.textContent = duration;
                timerToggleBtn.innerHTML = pauseIcon;
                
                playTimerSound(); 

                timerInterval = setInterval(() => {
                    timerSeconds--;
                    timerDisplay.textContent = timerSeconds;
                    
                    if (timerSeconds > 0) {
                        if (attemptState === 'steal') {
                            playStealSound(); 
                        } else {
                            playTimerSound(); 
                        }
                    }

                    if (timerSeconds <= 0) {
                        clearInterval(timerInterval);
                        isTimerRunning = false;
                        
                        if (attemptState === 'initial') {
                            handleTimesUp(); 
                        } else { 
                            playTimesUpSound(); 
                            modalAnswer.style.display = 'block'; 
                            showNotification("Time's Up! The answer was...");
                            // NEW: Show next button instead of closing
                            scoringButtons.classList.add('hidden');
                            nextBtn.classList.remove('hidden');
                        }
                    }
                }, 1000);
            }

            function handleTimerToggle() {
                if (isTimerRunning) {
                    resetTimer();
                } else {
                    startTimer(timerSeconds); 
                }
            }

            // --- handleTimesUp (Initial attempt) ---
            function handleTimesUp() {
                playTimesUpSound(); // Play times up sound
                resetTimer();
                const otherTeamNum = activeTeam === 1 ? 2 : 1;
                const otherTeamName = (otherTeamNum === 1 ? team1NameInput.value : team2NameInput.value);
                
                showNotification(`Time's Up! ${otherTeamName}, you have 5 seconds to steal!`);
                
                attemptState = 'steal';
                setActiveTeam(otherTeamNum);
                
                modalAnswer.style.display = 'none'; 
                scoringButtons.classList.remove('hidden'); 
                
                startTimer(5); // NEW: Steal timer is 5 seconds
            }

            // ---------------------------------
            // --- 12. EVENT HANDLERS (CLICKS) ---
            // ---------------------------------
            function handleQuestionClick(e) {
                if (!audioContext) {
                    initializeAudio(); // First click initializes audio
                }

                const cell = e.target;
                const category = cell.dataset.category;
                
                const pointsKey = parseInt(cell.dataset.pointsKey); 
                const pointsValue = parseInt(cell.dataset.pointsValue);
                
                if (!category || !pointsKey || cell.classList.contains('answered')) return;
                
                const { q, a } = gameData[category][pointsKey];
                
                if (!q || !a) {
                    console.error("Could not find question for:", category, pointsKey);
                    return; 
                }

                cell.classList.add('answered');
                cell.textContent = '';
                currentPoints = pointsValue;

                if (cell.dataset.dailyDouble === 'true') {
                    currentDailyDouble = { category, points: pointsValue, q, a };
                    handleDailyDouble();
                } else {
                    showQuestionModal(category, pointsValue, q, a);
                }
            }

            // ---------------------------------
            // --- 13. MODAL & POPUP LOGIC ---
            // ---------------------------------
            function showQuestionModal(category, points, q, a) {
                modalCategory.textContent = category;
                modalPoints.textContent = `$${points}`;
                modalQuestion.textContent = q;
                modalAnswer.textContent = a;
                
                attemptState = 'initial'; 
                hideNotification(); 
                
                modalAnswer.style.display = 'none'; 
                scoringButtons.classList.remove('hidden');
                nextBtn.classList.add('hidden'); // NEW: Hide next button
                
                timerContainer.style.display = 'flex';
                resetTimer();
                startTimer(37); // NEW: Main timer is 37 seconds

                modal.style.display = 'flex';
            }

            function handleDailyDouble() {
                playDailyDoubleSound();

                const currentTeamScore = (activeTeam === 1) ? team1Score : team2Score;
                const maxWager = Math.max(1000, currentTeamScore); 
                ddWagerInput.value = 5;
                ddWagerInput.min = 5;
                ddWagerInput.max = maxWager;
                ddWagerLabel.textContent = `Enter Wager (Max: $${maxWager}):`
                ddModal.style.display = 'flex';
            }

            submitWagerBtn.addEventListener('click', () => {
                const wager = parseInt(ddWagerInput.value);
                const maxWager = parseInt(ddWagerInput.max);
                if (isNaN(wager) || wager < 5 || wager > maxWager) {
                    ddWagerInput.style.border = '2px solid red';
                    return;
                }
                ddWagerInput.style.border = '2px solid #ccc';
                currentWager = wager;
                currentPoints = wager; 
                ddModal.style.display = 'none';
                const { category, q, a } = currentDailyDouble;
                
                showQuestionModal(`DAILY DOUBLE: ${category}`, `Wager: $${wager}`, q, a);
                attemptState = 'dailyDouble';
            });

            function closeModal() {
                modal.style.display = 'none';
                ddModal.style.display = 'none';
                resetTimer(); 
                hideNotification();
            }

            // ------------------------------------------
            // --- 14. BUTTON & INPUT LISTENERS ---
            // ------------------------------------------
            
            // --- Modal Button Listeners ---
            correctBtn.addEventListener('click', () => {
                playCorrectSound(); 
                
                // NEW: Calculate points (steal gets half)
                let pointsToAdd = 0;
                if (attemptState === 'steal') {
                    pointsToAdd = Math.round(currentPoints / 2);
                    showNotification("Steal successful!", 1500);
                } else {
                    pointsToAdd = currentPoints;
                    showNotification("Correct!", 1500);
                }
                updateScore(pointsToAdd);

                modalAnswer.style.display = 'block'; 
                resetTimer();
                
                // NEW: Show next button
                scoringButtons.classList.add('hidden');
                nextBtn.classList.remove('hidden');
            });

            incorrectBtn.addEventListener('click', () => {
                playTimesUpSound(); // Play buzzer for wrong answer
                
                if (attemptState === 'initial' || attemptState === 'dailyDouble') {
                    
                    // NEW: Lose half points (or full for DD)
                    let pointsToLose = 0;
                    if (attemptState === 'dailyDouble') {
                        pointsToLose = -currentPoints;
                    } else {
                        pointsToLose = -Math.round(currentPoints / 2);
                    }
                    updateScore(pointsToLose); 
                    
                    if (attemptState === 'dailyDouble') {
                        modalAnswer.style.display = 'block'; 
                        showNotification("Incorrect! The answer was...");
                        resetTimer();
                        // NEW: Show next button
                        scoringButtons.classList.add('hidden');
                        nextBtn.classList.remove('hidden');
                        return;
                    }

                    // Set up the steal attempt
                    attemptState = 'steal';
                    const otherTeamNum = activeTeam === 1 ? 2 : 1;
                    const otherTeamName = (otherTeamNum === 1 ? team1NameInput.value : team2NameInput.value);
                    
                    setActiveTeam(otherTeamNum);
                    showNotification(`Incorrect! ${otherTeamName}, you have 5 seconds to steal!`);
                    
                    modalAnswer.style.display = 'none'; 
                    
                    resetTimer();
                    startTimer(5); // NEW: Steal timer is 5 seconds
                    
                } else { 
                    // Failed steal, no points lost
                    modalAnswer.style.display = 'block'; 
                    showNotification("Incorrect! The answer was...");
                    resetTimer();
                    // NEW: Show next button
                    scoringButtons.classList.add('hidden');
                    nextBtn.classList.remove('hidden');
                }
            });

            // NEW: Next Button closes modal
            nextBtn.addEventListener('click', closeModal);

            // Close modal if clicking outside the content
            window.addEventListener('click', (e) => {
                if (e.target === modal || e.target === ddModal) {
                    // Don't close modal on outside click anymore, must use Next
                    // closeModal(); 
                }
            });

            // --- Team Customization Listeners ---
            team1Board.addEventListener('click', () => setActiveTeam(1));
            team2Board.addEventListener('click', () => setActiveTeam(2)); 
            team1NameInput.addEventListener('click', (e) => e.stopPropagation());
            team2NameInput.addEventListener('click', (e) => e.stopPropagation());
            team1ColorPicker.addEventListener('click', (e) => e.stopPropagation());
            team2ColorPicker.addEventListener('click', (e) => e.stopPropagation());
            
            team1ColorPicker.addEventListener('input', (e) => {
                team1Board.style.setProperty('--team-color', e.target.value);
            });
            team2ColorPicker.addEventListener('input', (e) => {
                team2Board.style.setProperty('--team-color', e.target.value);
            });

            // Reset game
            resetBtn.addEventListener('click', () => {
                resetTimer(); // Stop sound on reset
                createBoard();
            });

            // Timer Toggle
            timerToggleBtn.addEventListener('click', handleTimerToggle);

            // ---------------------------------
            // --- 15. INITIALIZE GAME ---
            // ---------------------------------
            createBoard();
            resetTimer(); // Set initial play icon
        });
    </script>
</body>
</html>

==================================================
FILE PATH: READ.ME
==================================================


==================================================
FILE PATH: Meta\Built in audio code
==================================================
            let audioContext;
            let timerOscillator; // To keep track of the timer sound

            // 7a. Initialize Audio (Called on first click)
            // This "unlocks" the browser's audio permissions.
            function initializeAudio() {
                if (!audioContext) {
                    try {
                        audioContext = new (window.AudioContext || window.webkitAudioContext)();
                        console.log("AudioContext initialized.");
                    } catch (e) {
                        console.error("Web Audio API is not supported in this browser.", e);
                    }
                }
            }

            // 7b. Play Timer Sound (a "tick")
            // This creates a simple "sine" wave oscillator for a short duration.
            function playTimerSound() {
                if (!audioContext) return;
                // Stop any previous tick
                if (timerOscillator) {
                    timerOscillator.stop();
                }
                timerOscillator = audioContext.createOscillator();
                const gainNode = audioContext.createGain();
                
                timerOscillator.type = 'sine'; // A clean "beep" sound
                timerOscillator.frequency.setValueAtTime(1000, audioContext.currentTime); // High pitch tick
                gainNode.gain.setValueAtTime(0.1, audioContext.currentTime); // Quiet
                gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.05);

                timerOscillator.connect(gainNode);
                gainNode.connect(audioContext.destination);
                
                timerOscillator.start();
                timerOscillator.stop(audioContext.currentTime + 0.05);
            }

            // 7c. Stop Timer Sound
            function stopTimerSound() {
                if (timerOscillator) {
                    timerOscillator.stop();
                    timerOscillator = null;
                }
            }

            // 7d. Play Daily Double Sound
            // This plays two notes, one after the other, with rising pitch.
            function playDailyDoubleSound() {
                if (!audioContext) return;
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                osc.type = 'sine'; // You could change this to 'square' for a retro sound
                osc.connect(gain);
                gain.connect(audioContext.destination);

                const now = audioContext.currentTime;
                gain.gain.setValueAtTime(0.3, now); // Volume
                
                // First note
                osc.frequency.setValueAtTime(300, now);
                osc.frequency.exponentialRampToValueAtTime(600, now + 0.1);
                
                // Second note
                osc.frequency.setValueAtTime(450, now + 0.15);
                osc.frequency.exponentialRampToValueAtTime(900, now + 0.3);

                osc.start();
                osc.stop(now + 0.4);
            }

            // 7e. Play Times Up Sound (a "buzz")
            // This uses a "sawtooth" wave to sound like a buzzer.
            function playTimesUpSound() {
                if (!audioContext) return;
                const osc = audioContext.createOscillator();
                const gain = audioContext.createGain();
                osc.type = 'sawtooth'; // A harsher buzz sound
                osc.frequency.setValueAtTime(150, audioContext.currentTime); // Low pitch
                osc.frequency.exponentialRampToValueAtTime(50, audioContext.currentTime + 0.2); // Pitch drops
                
                gain.gain.setValueAtTime(0.3, audioContext.currentTime);
                gain.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 0.2); // Fades out

                osc.connect(gain);
                gain.connect(audioContext.destination);
                osc.start();
                osc.stop(audioContext.currentTime + 0.2);
            }

